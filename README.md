# Тестовое задание на позицию Python backend разработчик

Необходимо написать API для сервиса аугментации изображений (реализация FastAPI). пользователь сначала регистрируется в системе (если не зарегистрирован), затем авторизуется в системе. Главным образом пользователь будет отправлять изображения для получения
соответствующих трансформировнных его копий. На каждое изображение должны быть следующие преобразования:

- поворот на 90 градусов;
- преобразование из пространства RGB в Space Gray;
- изменение размера изображения в 2 раза с сохранением пропорций;

Преобразование изображений можно сделать любой библиотекой на выбор (opencv, PIL, scikit-image и др).
Преобразованное и оригинальное изображения необходимо сохранять в S3 хранилище (minio).
Данные по каждому изображению сохраняем в таблицу ImageTask (Postgres), миграции - alembic.

Таблица ImageTask должна иметь следующую структуру:

| id                                   | task_id                              | img_link        | created_at          |
| ------------------------------------ | ------------------------------------ | --------------- | ------------------- |
| d878ae93-9832-4bc2-bd3d-e97b6695c956 | 3b3a6ef9-e577-4e61-ab46-8adb6609c250 | name_suffix.ext | 2024-01-01 23:00:00 |

Таблица User имеет соответствующий вид

| id                                   | email                | password        | created_at          | first_name | last_name |
| ------------------------------------ | -------------------- | --------------- | ------------------- | ---------- | --------- |
| d878ae93-9832-4bc2-bd3d-e97b6695c956 | some_email@gmail.com | hashed_password | 2024-01-01 23:00:00 | Mr         | Smith     |

, где

<name> - название загруженного изображения
<ext> - расширение изображения (jpg, png - допустимые расширения)
<suffix> - суффикс, соответсвующий типу преобразования изображения:

- original
- rotated
- gray
- scaled

Резализовать следующие методы API:

| Метод | Путь               | Описание                                                            |
| ----- | ------------------ | ------------------------------------------------------------------- |
| POST  | /login             | Авторизация пользователя (возвращает JWT-токен)                     |
| POST  | /registration      | Регистрация пользователя по email и password (возвращает JWT-токен) |
| POST  | /upload            | отправить список изображений                                        |
| GET   | /status/<id>       | получить статус выполнения задачи по данному id                     |
| GET   | /history/<user_id> | получить историю обработанных изображений для данного user_id       |
| GET   | /task/<id>         | скачать изображения по данной задаче id в виде zip-архива           |

Запросы должны выполняться с помощью системы ORM SQLAlchemy.
Для обработки очереди задач необходимо использовать Celery.
Брокер для Celery можно выбрать по собственному желанию (Redis/Kafka/RabbitMQ).
Также необходимо поднять все приложение в docker контейнерах используя docker-compose.
Написать unittest используя pytest.

Стек:

- FastAPI
- PostgreSQL
- Celery
- Asyncio
- SQLAlchemy
- Docker/Docker-compose
- Pytest

Код, примеры переменных окружения (.env.example), а также инструкцию по развертыванию приложения необходимо залить в
git репозиторий и прислать ссылку.
